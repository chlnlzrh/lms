{
  "requests": [
    {
      "custom_id": "lesson_M0-L001",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M0-L001\n- Lesson Title: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery)\n- Module: M0 ‚Äî AI-Native Salesforce Foundations\n- Subtopic / Focus Area: General\n- Complexity Level: F (Foundation)\n- Estimated Duration: 45 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M0-L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery)` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M0-L002",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M0-L002\n- Lesson Title: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM\n- Module: M0 ‚Äî AI-Native Salesforce Foundations\n- Subtopic / Focus Area: General\n- Complexity Level: F (Foundation)\n- Estimated Duration: 45 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M0-L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M0-L003",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M0-L003\n- Lesson Title: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps)\n- Module: M0 ‚Äî AI-Native Salesforce Foundations\n- Subtopic / Focus Area: General\n- Complexity Level: F (Foundation)\n- Estimated Duration: 45 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M0-L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps)` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M0-L004",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M0-L004\n- Lesson Title: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations\n- Module: M0 ‚Äî AI-Native Salesforce Foundations\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M0-L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M0-L005",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M0-L005\n- Lesson Title: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews\n- Module: M0 ‚Äî AI-Native Salesforce Foundations\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M0-L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M0-L006",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M0-L006\n- Lesson Title: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments\n- Module: M0 ‚Äî AI-Native Salesforce Foundations\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M0-L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M0-L007",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M0-L007\n- Lesson Title: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default\n- Module: M0 ‚Äî AI-Native Salesforce Foundations\n- Subtopic / Focus Area: General\n- Complexity Level: A (Advanced)\n- Estimated Duration: 75 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M0-L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M0-L008",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M0-L008\n- Lesson Title: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë\n- Module: M0 ‚Äî AI-Native Salesforce Foundations\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M0-L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M1-L001",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M1-L001\n- Lesson Title: Org strategy (single vs multi-org, sandboxes, scratch orgs)\n- Module: M1 ‚Äî Org Strategy & Governance\n- Subtopic / Focus Area: General\n- Complexity Level: F (Foundation)\n- Estimated Duration: 45 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M1-L001: Org strategy (single vs multi-org, sandboxes, scratch orgs)` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M1-L002",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M1-L002\n- Lesson Title: ALM with SFDX: branches, stories, promotion paths\n- Module: M1 ‚Äî Org Strategy & Governance\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M1-L002: ALM with SFDX: branches, stories, promotion paths` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M1-L003",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M1-L003\n- Lesson Title: Naming, tagging & metadata conventions (discoverability, drift control)\n- Module: M1 ‚Äî Org Strategy & Governance\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M1-L003: Naming, tagging & metadata conventions (discoverability, drift control)` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M1-L004",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M1-L004\n- Lesson Title: DoA/approvals for risky changes & exception registers\n- Module: M1 ‚Äî Org Strategy & Governance\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M1-L004: DoA/approvals for risky changes & exception registers` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M1-L005",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M1-L005\n- Lesson Title: Center of Excellence rhythms & standards catalogs\n- Module: M1 ‚Äî Org Strategy & Governance\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M1-L005: Center of Excellence rhythms & standards catalogs` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M1-L006",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M1-L006\n- Lesson Title: Compliance overlays (SOX, ISO, privacy) to ALM\n- Module: M1 ‚Äî Org Strategy & Governance\n- Subtopic / Focus Area: General\n- Complexity Level: A (Advanced)\n- Estimated Duration: 75 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M1-L006: Compliance overlays (SOX, ISO, privacy) to ALM` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M1-L007",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M1-L007\n- Lesson Title: Sunsetting & archival rules for metadata/flows\n- Module: M1 ‚Äî Org Strategy & Governance\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M1-L007: Sunsetting & archival rules for metadata/flows` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M1-L008",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M1-L008\n- Lesson Title: Executive dashboards: change health & velocity\n- Module: M1 ‚Äî Org Strategy & Governance\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M1-L008: Executive dashboards: change health & velocity` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M2-L001",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M2-L001\n- Lesson Title: Principle-of-least-privilege: profiles vs permission sets\n- Module: M2 ‚Äî Security & Sharing\n- Subtopic / Focus Area: General\n- Complexity Level: F (Foundation)\n- Estimated Duration: 45 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M2-L001: Principle-of-least-privilege: profiles vs permission sets` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M2-L002",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M2-L002\n- Lesson Title: Sharing model: OWD, roles, sharing rules, manual/team\n- Module: M2 ‚Äî Security & Sharing\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M2-L002: Sharing model: OWD, roles, sharing rules, manual/team` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M2-L003",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M2-L003\n- Lesson Title: Row-level & field-level security patterns\n- Module: M2 ‚Äî Security & Sharing\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M2-L003: Row-level & field-level security patterns` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M2-L004",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M2-L004\n- Lesson Title: Scoped data access for copilots & retrieval\n- Module: M2 ‚Äî Security & Sharing\n- Subtopic / Focus Area: General\n- Complexity Level: A (Advanced)\n- Estimated Duration: 75 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M2-L004: Scoped data access for copilots & retrieval` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M2-L005",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M2-L005\n- Lesson Title: Shield: encryption, event monitoring, field audit trail\n- Module: M2 ‚Äî Security & Sharing\n- Subtopic / Focus Area: General\n- Complexity Level: A (Advanced)\n- Estimated Duration: 75 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M2-L005: Shield: encryption, event monitoring, field audit trail` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M2-L006",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M2-L006\n- Lesson Title: Just-in-time access, break-glass & recerts\n- Module: M2 ‚Äî Security & Sharing\n- Subtopic / Focus Area: General\n- Complexity Level: A (Advanced)\n- Estimated Duration: 75 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M2-L006: Just-in-time access, break-glass & recerts` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M2-L007",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M2-L007\n- Lesson Title: Secrets & Named Credentials hygiene\n- Module: M2 ‚Äî Security & Sharing\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M2-L007: Secrets & Named Credentials hygiene` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M2-L008",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M2-L008\n- Lesson Title: Audit packs: who/what/when with hashes\n- Module: M2 ‚Äî Security & Sharing\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M2-L008: Audit packs: who/what/when with hashes` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M3-L001",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M3-L001\n- Lesson Title: Standard vs custom objects; lookup vs master-detail\n- Module: M3 ‚Äî Data Model & Contracts\n- Subtopic / Focus Area: General\n- Complexity Level: F (Foundation)\n- Estimated Duration: 45 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M3-L001: Standard vs custom objects; lookup vs master-detail` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M3-L002",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M3-L002\n- Lesson Title: External Objects/Big Objects & LDV considerations\n- Module: M3 ‚Äî Data Model & Contracts\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M3-L002: External Objects/Big Objects & LDV considerations` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M3-L003",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M3-L003\n- Lesson Title: Field contracts: types, validation, picklists, uniqueness\n- Module: M3 ‚Äî Data Model & Contracts\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M3-L003: Field contracts: types, validation, picklists, uniqueness` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M3-L004",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M3-L004\n- Lesson Title: Referential integrity & cascade behaviors\n- Module: M3 ‚Äî Data Model & Contracts\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M3-L004: Referential integrity & cascade behaviors` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M3-L005",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M3-L005\n- Lesson Title: Data quality rules & remediation (GE/Soda-like patterns)\n- Module: M3 ‚Äî Data Model & Contracts\n- Subtopic / Focus Area: General\n- Complexity Level: A (Advanced)\n- Estimated Duration: 75 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M3-L005: Data quality rules & remediation (GE/Soda-like patterns)` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M3-L006",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M3-L006\n- Lesson Title: Archival/retention & soft delete vs hard delete\n- Module: M3 ‚Äî Data Model & Contracts\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M3-L006: Archival/retention & soft delete vs hard delete` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M3-L007",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M3-L007\n- Lesson Title: Metric contracts across Sales/Service/Custom apps\n- Module: M3 ‚Äî Data Model & Contracts\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M3-L007: Metric contracts across Sales/Service/Custom apps` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M3-L008",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M3-L008\n- Lesson Title: Evidence: ERDs, lineage & owner registry\n- Module: M3 ‚Äî Data Model & Contracts\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M3-L008: Evidence: ERDs, lineage & owner registry` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M4-L001",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M4-L001\n- Lesson Title: Flow types (record-triggered, schedule, screen, autolaunched)\n- Module: M4 ‚Äî Declarative Automation\n- Subtopic / Focus Area: General\n- Complexity Level: F (Foundation)\n- Estimated Duration: 45 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M4-L001: Flow types (record-triggered, schedule, screen, autolaunched)` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M4-L002",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M4-L002\n- Lesson Title: Best practices: subflows, fault paths, transactions\n- Module: M4 ‚Äî Declarative Automation\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M4-L002: Best practices: subflows, fault paths, transactions` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M4-L003",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M4-L003\n- Lesson Title: Idempotency, retries & bulk-safe Flow design\n- Module: M4 ‚Äî Declarative Automation\n- Subtopic / Focus Area: General\n- Complexity Level: A (Advanced)\n- Estimated Duration: 75 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M4-L003: Idempotency, retries & bulk-safe Flow design` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M4-L004",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M4-L004\n- Lesson Title: Flow vs Apex decision tree & governance\n- Module: M4 ‚Äî Declarative Automation\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M4-L004: Flow vs Apex decision tree & governance` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M4-L005",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M4-L005\n- Lesson Title: Flow tests, debug & runtime performance\n- Module: M4 ‚Äî Declarative Automation\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M4-L005: Flow tests, debug & runtime performance` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M4-L006",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M4-L006\n- Lesson Title: AI-assisted Flow generation with guardrails\n- Module: M4 ‚Äî Declarative Automation\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M4-L006: AI-assisted Flow generation with guardrails` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M4-L007",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M4-L007\n- Lesson Title: Change collision & recursion prevention\n- Module: M4 ‚Äî Declarative Automation\n- Subtopic / Focus Area: General\n- Complexity Level: A (Advanced)\n- Estimated Duration: 75 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M4-L007: Change collision & recursion prevention` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M4-L008",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M4-L008\n- Lesson Title: Evidence: diagrams, run logs, approvals\n- Module: M4 ‚Äî Declarative Automation\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M4-L008: Evidence: diagrams, run logs, approvals` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M5-L001",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M5-L001\n- Lesson Title: Governor limits & bulkification fundamentals\n- Module: M5 ‚Äî Apex Engineering\n- Subtopic / Focus Area: General\n- Complexity Level: F (Foundation)\n- Estimated Duration: 45 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M5-L001: Governor limits & bulkification fundamentals` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M5-L002",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M5-L002\n- Lesson Title: SOQL/SOSL patterns, selective filters, indexing\n- Module: M5 ‚Äî Apex Engineering\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M5-L002: SOQL/SOSL patterns, selective filters, indexing` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M5-L003",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M5-L003\n- Lesson Title: Triggers: single-trigger pattern & handler layers\n- Module: M5 ‚Äî Apex Engineering\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M5-L003: Triggers: single-trigger pattern & handler layers` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M5-L004",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M5-L004\n- Lesson Title: Async: Queueable/Batchable/Schedulable/Future\n- Module: M5 ‚Äî Apex Engineering\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M5-L004: Async: Queueable/Batchable/Schedulable/Future` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M5-L005",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M5-L005\n- Lesson Title: Platform events & transactional boundaries\n- Module: M5 ‚Äî Apex Engineering\n- Subtopic / Focus Area: General\n- Complexity Level: A (Advanced)\n- Estimated Duration: 75 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M5-L005: Platform events & transactional boundaries` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M5-L006",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M5-L006\n- Lesson Title: Error handling, retries & DLQ patterns in Apex\n- Module: M5 ‚Äî Apex Engineering\n- Subtopic / Focus Area: General\n- Complexity Level: A (Advanced)\n- Estimated Duration: 75 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M5-L006: Error handling, retries & DLQ patterns in Apex` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M5-L007",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M5-L007\n- Lesson Title: AI code review rubrics & test recommendations\n- Module: M5 ‚Äî Apex Engineering\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M5-L007: AI code review rubrics & test recommendations` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M5-L008",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M5-L008\n- Lesson Title: Evidence: coverage, logs, debug, limits dashboards\n- Module: M5 ‚Äî Apex Engineering\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M5-L008: Evidence: coverage, logs, debug, limits dashboards` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M6-L001",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M6-L001\n- Lesson Title: LWC anatomy, composition & data services (wire, Apex)\n- Module: M6 ‚Äî Lightning Web Components\n- Subtopic / Focus Area: General\n- Complexity Level: F (Foundation)\n- Estimated Duration: 45 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M6-L001: LWC anatomy, composition & data services (wire, Apex)` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M6-L002",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M6-L002\n- Lesson Title: State, events & pub/sub patterns\n- Module: M6 ‚Äî Lightning Web Components\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M6-L002: State, events & pub/sub patterns` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M6-L003",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M6-L003\n- Lesson Title: Accessibility & design standards (SLDS)\n- Module: M6 ‚Äî Lightning Web Components\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M6-L003: Accessibility & design standards (SLDS)` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M6-L004",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M6-L004\n- Lesson Title: Caching, offline & optimistic UI patterns\n- Module: M6 ‚Äî Lightning Web Components\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M6-L004: Caching, offline & optimistic UI patterns` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M6-L005",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M6-L005\n- Lesson Title: Security: Locker, CSP, dom sanitization\n- Module: M6 ‚Äî Lightning Web Components\n- Subtopic / Focus Area: General\n- Complexity Level: A (Advanced)\n- Estimated Duration: 75 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M6-L005: Security: Locker, CSP, dom sanitization` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M6-L006",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M6-L006\n- Lesson Title: Performance budgets & profiling\n- Module: M6 ‚Äî Lightning Web Components\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M6-L006: Performance budgets & profiling` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M6-L007",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M6-L007\n- Lesson Title: AI-assisted code scaffolds & reviews\n- Module: M6 ‚Äî Lightning Web Components\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M6-L007: AI-assisted code scaffolds & reviews` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M6-L008",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M6-L008\n- Lesson Title: Evidence: storybook-style docs & tests\n- Module: M6 ‚Äî Lightning Web Components\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M6-L008: Evidence: storybook-style docs & tests` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M7-L001",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M7-L001\n- Lesson Title: REST/SOAP basics, auth, rate limits & retries\n- Module: M7 ‚Äî Integration & APIs\n- Subtopic / Focus Area: General\n- Complexity Level: F (Foundation)\n- Estimated Duration: 45 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M7-L001: REST/SOAP basics, auth, rate limits & retries` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M7-L002",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M7-L002\n- Lesson Title: Named Credentials & OAuth/OIDC flows\n- Module: M7 ‚Äî Integration & APIs\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M7-L002: Named Credentials & OAuth/OIDC flows` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M7-L003",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M7-L003\n- Lesson Title: External Services, OpenAPI & invocable actions\n- Module: M7 ‚Äî Integration & APIs\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M7-L003: External Services, OpenAPI & invocable actions` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M7-L004",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M7-L004\n- Lesson Title: Bulk API v2 & idempotent upserts/merges\n- Module: M7 ‚Äî Integration & APIs\n- Subtopic / Focus Area: General\n- Complexity Level: A (Advanced)\n- Estimated Duration: 75 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M7-L004: Bulk API v2 & idempotent upserts/merges` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M7-L005",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M7-L005\n- Lesson Title: External Objects (OData) vs replication trade-offs\n- Module: M7 ‚Äî Integration & APIs\n- Subtopic / Focus Area: General\n- Complexity Level: A (Advanced)\n- Estimated Duration: 75 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M7-L005: External Objects (OData) vs replication trade-offs` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M7-L006",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M7-L006\n- Lesson Title: Platform Events & Change Data Capture bridges\n- Module: M7 ‚Äî Integration & APIs\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M7-L006: Platform Events & Change Data Capture bridges` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M7-L007",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M7-L007\n- Lesson Title: Workato/MuleSoft/ETL hooks & backpressure\n- Module: M7 ‚Äî Integration & APIs\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M7-L007: Workato/MuleSoft/ETL hooks & backpressure` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M7-L008",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M7-L008\n- Lesson Title: Evidence: postman packs, contracts & examples\n- Module: M7 ‚Äî Integration & APIs\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M7-L008: Evidence: postman packs, contracts & examples` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M8-L001",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M8-L001\n- Lesson Title: CDC vs PE vs Generic Events: when to use which\n- Module: M8 ‚Äî Eventing & CDC\n- Subtopic / Focus Area: General\n- Complexity Level: F (Foundation)\n- Estimated Duration: 45 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M8-L001: CDC vs PE vs Generic Events: when to use which` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M8-L002",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M8-L002\n- Lesson Title: Replay IDs, ordering & dedupe strategies\n- Module: M8 ‚Äî Eventing & CDC\n- Subtopic / Focus Area: General\n- Complexity Level: A (Advanced)\n- Estimated Duration: 75 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M8-L002: Replay IDs, ordering & dedupe strategies` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M8-L003",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M8-L003\n- Lesson Title: Outbox/inbox patterns for reliability\n- Module: M8 ‚Äî Eventing & CDC\n- Subtopic / Focus Area: General\n- Complexity Level: A (Advanced)\n- Estimated Duration: 75 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M8-L003: Outbox/inbox patterns for reliability` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M8-L004",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M8-L004\n- Lesson Title: Backpressure, flow control & burst handling\n- Module: M8 ‚Äî Eventing & CDC\n- Subtopic / Focus Area: General\n- Complexity Level: A (Advanced)\n- Estimated Duration: 75 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M8-L004: Backpressure, flow control & burst handling` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M8-L005",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M8-L005\n- Lesson Title: Consumer isolation & DLQ triage\n- Module: M8 ‚Äî Eventing & CDC\n- Subtopic / Focus Area: General\n- Complexity Level: A (Advanced)\n- Estimated Duration: 75 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M8-L005: Consumer isolation & DLQ triage` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M8-L006",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M8-L006\n- Lesson Title: Contract tests for topics & change schemas\n- Module: M8 ‚Äî Eventing & CDC\n- Subtopic / Focus Area: General\n- Complexity Level: A (Advanced)\n- Estimated Duration: 75 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M8-L006: Contract tests for topics & change schemas` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M8-L007",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M8-L007\n- Lesson Title: Observability: lag, drops, replays dashboards\n- Module: M8 ‚Äî Eventing & CDC\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M8-L007: Observability: lag, drops, replays dashboards` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M8-L008",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M8-L008\n- Lesson Title: Evidence: topic catalogs & consumer SLAs\n- Module: M8 ‚Äî Eventing & CDC\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M8-L008: Evidence: topic catalogs & consumer SLAs` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M9-L001",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M9-L001\n- Lesson Title: SFDX project structure & source tracking\n- Module: M9 ‚Äî DevOps & Packaging\n- Subtopic / Focus Area: General\n- Complexity Level: F (Foundation)\n- Estimated Duration: 45 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M9-L001: SFDX project structure & source tracking` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M9-L002",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M9-L002\n- Lesson Title: Scratch orgs & ephemeral environments\n- Module: M9 ‚Äî DevOps & Packaging\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M9-L002: Scratch orgs & ephemeral environments` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M9-L003",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M9-L003\n- Lesson Title: Second-gen packaging (unlocked/managed)\n- Module: M9 ‚Äî DevOps & Packaging\n- Subtopic / Focus Area: General\n- Complexity Level: A (Advanced)\n- Estimated Duration: 75 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M9-L003: Second-gen packaging (unlocked/managed)` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M9-L004",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M9-L004\n- Lesson Title: Metadata vs source: deploy & retrieve rules\n- Module: M9 ‚Äî DevOps & Packaging\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M9-L004: Metadata vs source: deploy & retrieve rules` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M9-L005",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M9-L005\n- Lesson Title: CI/CD pipelines with test gates & code scan\n- Module: M9 ‚Äî DevOps & Packaging\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M9-L005: CI/CD pipelines with test gates & code scan` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M9-L006",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M9-L006\n- Lesson Title: Data seeding, org shape & fixtures\n- Module: M9 ‚Äî DevOps & Packaging\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M9-L006: Data seeding, org shape & fixtures` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M9-L007",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M9-L007\n- Lesson Title: Release notes, change approvals & audit\n- Module: M9 ‚Äî DevOps & Packaging\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M9-L007: Release notes, change approvals & audit` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M9-L008",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M9-L008\n- Lesson Title: Rollback/rollback-less patterns & canaries\n- Module: M9 ‚Äî DevOps & Packaging\n- Subtopic / Focus Area: General\n- Complexity Level: A (Advanced)\n- Estimated Duration: 75 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M9-L008: Rollback/rollback-less patterns & canaries` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M10-L001",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M10-L001\n- Lesson Title: Data Loader vs APIs vs ETL tools\n- Module: M10 ‚Äî Data Migration & LDV\n- Subtopic / Focus Area: General\n- Complexity Level: F (Foundation)\n- Estimated Duration: 45 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M10-L001: Data Loader vs APIs vs ETL tools` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M10-L002",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M10-L002\n- Lesson Title: Upsert keys, external IDs & mapping\n- Module: M10 ‚Äî Data Migration & LDV\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M10-L002: Upsert keys, external IDs & mapping` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M10-L003",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M10-L003\n- Lesson Title: Batch sizing, concurrency & locks\n- Module: M10 ‚Äî Data Migration & LDV\n- Subtopic / Focus Area: General\n- Complexity Level: A (Advanced)\n- Estimated Duration: 75 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M10-L003: Batch sizing, concurrency & locks` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M10-L004",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M10-L004\n- Lesson Title: Referential integrity & parent-first loads\n- Module: M10 ‚Äî Data Migration & LDV\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M10-L004: Referential integrity & parent-first loads` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M10-L005",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M10-L005\n- Lesson Title: Masking & synthetic data for tests\n- Module: M10 ‚Äî Data Migration & LDV\n- Subtopic / Focus Area: General\n- Complexity Level: A (Advanced)\n- Estimated Duration: 75 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M10-L005: Masking & synthetic data for tests` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M10-L006",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M10-L006\n- Lesson Title: Reconciliation & tie-out to sources\n- Module: M10 ‚Äî Data Migration & LDV\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M10-L006: Reconciliation & tie-out to sources` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M10-L007",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M10-L007\n- Lesson Title: Late-arriving & delta repair flows\n- Module: M10 ‚Äî Data Migration & LDV\n- Subtopic / Focus Area: General\n- Complexity Level: A (Advanced)\n- Estimated Duration: 75 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M10-L007: Late-arriving & delta repair flows` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M10-L008",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M10-L008\n- Lesson Title: Evidence: counts, checksums, exceptions\n- Module: M10 ‚Äî Data Migration & LDV\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M10-L008: Evidence: counts, checksums, exceptions` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M11-L001",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M11-L001\n- Lesson Title: Report types & join capabilities\n- Module: M11 ‚Äî Reporting & Analytics\n- Subtopic / Focus Area: General\n- Complexity Level: F (Foundation)\n- Estimated Duration: 45 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M11-L001: Report types & join capabilities` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M11-L002",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M11-L002\n- Lesson Title: Dashboard design & KPI contracts\n- Module: M11 ‚Äî Reporting & Analytics\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M11-L002: Dashboard design & KPI contracts` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M11-L003",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M11-L003\n- Lesson Title: Row-level formulas, buckets & limits\n- Module: M11 ‚Äî Reporting & Analytics\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M11-L003: Row-level formulas, buckets & limits` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M11-L004",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M11-L004\n- Lesson Title: CRM Analytics/Einstein Analytics patterns\n- Module: M11 ‚Äî Reporting & Analytics\n- Subtopic / Focus Area: General\n- Complexity Level: A (Advanced)\n- Estimated Duration: 75 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M11-L004: CRM Analytics/Einstein Analytics patterns` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M11-L005",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M11-L005\n- Lesson Title: Narrative generation with citations\n- Module: M11 ‚Äî Reporting & Analytics\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M11-L005: Narrative generation with citations` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M11-L006",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M11-L006\n- Lesson Title: Performance & refresh strategies\n- Module: M11 ‚Äî Reporting & Analytics\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M11-L006: Performance & refresh strategies` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M11-L007",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M11-L007\n- Lesson Title: Data trust: reconciliation & certification\n- Module: M11 ‚Äî Reporting & Analytics\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M11-L007: Data trust: reconciliation & certification` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M11-L008",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M11-L008\n- Lesson Title: Executive packs (What/So-What/Now-What)\n- Module: M11 ‚Äî Reporting & Analytics\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M11-L008: Executive packs (What/So-What/Now-What)` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M12-L001",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M12-L001\n- Lesson Title: Case lifecycle & Omni-Channel routing\n- Module: M12 ‚Äî Service Cloud Intelligence\n- Subtopic / Focus Area: General\n- Complexity Level: F (Foundation)\n- Estimated Duration: 45 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M12-L001: Case lifecycle & Omni-Channel routing` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M12-L002",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M12-L002\n- Lesson Title: Macros, quick actions & SLA timers\n- Module: M12 ‚Äî Service Cloud Intelligence\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M12-L002: Macros, quick actions & SLA timers` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M12-L003",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M12-L003\n- Lesson Title: Knowledge management & article quality rubrics\n- Module: M12 ‚Äî Service Cloud Intelligence\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M12-L003: Knowledge management & article quality rubrics` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M12-L004",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M12-L004\n- Lesson Title: Live summarization & reply drafting with citations\n- Module: M12 ‚Äî Service Cloud Intelligence\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M12-L004: Live summarization & reply drafting with citations` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M12-L005",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M12-L005\n- Lesson Title: Entitlements & milestone monitoring\n- Module: M12 ‚Äî Service Cloud Intelligence\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M12-L005: Entitlements & milestone monitoring` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M12-L006",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M12-L006\n- Lesson Title: Deflection bots & safe prompt/guardrails\n- Module: M12 ‚Äî Service Cloud Intelligence\n- Subtopic / Focus Area: General\n- Complexity Level: A (Advanced)\n- Estimated Duration: 75 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M12-L006: Deflection bots & safe prompt/guardrails` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M12-L007",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M12-L007\n- Lesson Title: Voice/chat integration & transcripts\n- Module: M12 ‚Äî Service Cloud Intelligence\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M12-L007: Voice/chat integration & transcripts` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M12-L008",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M12-L008\n- Lesson Title: Evidence: CSAT/NPS & case quality dashboards\n- Module: M12 ‚Äî Service Cloud Intelligence\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M12-L008: Evidence: CSAT/NPS & case quality dashboards` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M13-L001",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M13-L001\n- Lesson Title: Lead assignment & MQL/SQL definitions\n- Module: M13 ‚Äî Sales Cloud Orchestration\n- Subtopic / Focus Area: General\n- Complexity Level: F (Foundation)\n- Estimated Duration: 45 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M13-L001: Lead assignment & MQL/SQL definitions` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M13-L002",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M13-L002\n- Lesson Title: Opportunity stages & exit criteria\n- Module: M13 ‚Äî Sales Cloud Orchestration\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M13-L002: Opportunity stages & exit criteria` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M13-L003",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M13-L003\n- Lesson Title: Playbooks & next-best-actions with proof\n- Module: M13 ‚Äî Sales Cloud Orchestration\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M13-L003: Playbooks & next-best-actions with proof` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M13-L004",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M13-L004\n- Lesson Title: Forecast categories & pipeline hygiene\n- Module: M13 ‚Äî Sales Cloud Orchestration\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M13-L004: Forecast categories & pipeline hygiene` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M13-L005",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M13-L005\n- Lesson Title: Account scoring & whitespace detection\n- Module: M13 ‚Äî Sales Cloud Orchestration\n- Subtopic / Focus Area: General\n- Complexity Level: A (Advanced)\n- Estimated Duration: 75 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M13-L005: Account scoring & whitespace detection` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M13-L006",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M13-L006\n- Lesson Title: Executive deal reviews & narratives\n- Module: M13 ‚Äî Sales Cloud Orchestration\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M13-L006: Executive deal reviews & narratives` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M13-L007",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M13-L007\n- Lesson Title: RevOps interlocks (pricing/finance)\n- Module: M13 ‚Äî Sales Cloud Orchestration\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M13-L007: RevOps interlocks (pricing/finance)` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M13-L008",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M13-L008\n- Lesson Title: Evidence: win/loss insights & actions\n- Module: M13 ‚Äî Sales Cloud Orchestration\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M13-L008: Evidence: win/loss insights & actions` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M14-L001",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M14-L001\n- Lesson Title: Product catalogs, bundles & attributes\n- Module: M14 ‚Äî CPQ & Billing\n- Subtopic / Focus Area: General\n- Complexity Level: F (Foundation)\n- Estimated Duration: 45 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M14-L001: Product catalogs, bundles & attributes` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M14-L002",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M14-L002\n- Lesson Title: Price rules, discounts & approvals\n- Module: M14 ‚Äî CPQ & Billing\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M14-L002: Price rules, discounts & approvals` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M14-L003",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M14-L003\n- Lesson Title: Configuration constraints & guardrails\n- Module: M14 ‚Äî CPQ & Billing\n- Subtopic / Focus Area: General\n- Complexity Level: A (Advanced)\n- Estimated Duration: 75 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M14-L003: Configuration constraints & guardrails` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M14-L004",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M14-L004\n- Lesson Title: Quote templates & doc generation\n- Module: M14 ‚Äî CPQ & Billing\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M14-L004: Quote templates & doc generation` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M14-L005",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M14-L005\n- Lesson Title: Amend/renew & proration rules\n- Module: M14 ‚Äî CPQ & Billing\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M14-L005: Amend/renew & proration rules` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M14-L006",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M14-L006\n- Lesson Title: Revenue impacts & data consistency\n- Module: M14 ‚Äî CPQ & Billing\n- Subtopic / Focus Area: General\n- Complexity Level: A (Advanced)\n- Estimated Duration: 75 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M14-L006: Revenue impacts & data consistency` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M14-L007",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M14-L007\n- Lesson Title: Integration hooks to ERP/Billing\n- Module: M14 ‚Äî CPQ & Billing\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M14-L007: Integration hooks to ERP/Billing` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M14-L008",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M14-L008\n- Lesson Title: Evidence: quote audit & margin checks\n- Module: M14 ‚Äî CPQ & Billing\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M14-L008: Evidence: quote audit & margin checks` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M15-L001",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M15-L001\n- Lesson Title: Site templates & content strategy\n- Module: M15 ‚Äî Experience Cloud & Identity\n- Subtopic / Focus Area: General\n- Complexity Level: F (Foundation)\n- Estimated Duration: 45 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M15-L001: Site templates & content strategy` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M15-L002",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M15-L002\n- Lesson Title: Identity/auth flows (SAML/OIDC/SSO)\n- Module: M15 ‚Äî Experience Cloud & Identity\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M15-L002: Identity/auth flows (SAML/OIDC/SSO)` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M15-L003",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M15-L003\n- Lesson Title: Access models & sharing for external users\n- Module: M15 ‚Äî Experience Cloud & Identity\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M15-L003: Access models & sharing for external users` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M15-L004",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M15-L004\n- Lesson Title: Moderation, privacy & consent on communities\n- Module: M15 ‚Äî Experience Cloud & Identity\n- Subtopic / Focus Area: General\n- Complexity Level: A (Advanced)\n- Estimated Duration: 75 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M15-L004: Moderation, privacy & consent on communities` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M15-L005",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M15-L005\n- Lesson Title: Performance, SEO & caching\n- Module: M15 ‚Äî Experience Cloud & Identity\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M15-L005: Performance, SEO & caching` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M15-L006",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M15-L006\n- Lesson Title: File visibility & virus scanning\n- Module: M15 ‚Äî Experience Cloud & Identity\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M15-L006: File visibility & virus scanning` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M15-L007",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M15-L007\n- Lesson Title: Support deflection experiences with bots\n- Module: M15 ‚Äî Experience Cloud & Identity\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M15-L007: Support deflection experiences with bots` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M15-L008",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M15-L008\n- Lesson Title: Evidence: usage & satisfaction dashboards\n- Module: M15 ‚Äî Experience Cloud & Identity\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M15-L008: Evidence: usage & satisfaction dashboards` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M16-L001",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M16-L001\n- Lesson Title: Segment/treatment design & eligibility rules\n- Module: M16 ‚Äî Marketing Cloud & Account Engagement\n- Subtopic / Focus Area: General\n- Complexity Level: F (Foundation)\n- Estimated Duration: 45 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M16-L001: Segment/treatment design & eligibility rules` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M16-L002",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M16-L002\n- Lesson Title: Consent & preference centers (privacy-first)\n- Module: M16 ‚Äî Marketing Cloud & Account Engagement\n- Subtopic / Focus Area: General\n- Complexity Level: A (Advanced)\n- Estimated Duration: 75 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M16-L002: Consent & preference centers (privacy-first)` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M16-L003",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M16-L003\n- Lesson Title: Journeys & triggers; suppression logic\n- Module: M16 ‚Äî Marketing Cloud & Account Engagement\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M16-L003: Journeys & triggers; suppression logic` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M16-L004",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M16-L004\n- Lesson Title: Content generation with guardrails\n- Module: M16 ‚Äî Marketing Cloud & Account Engagement\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M16-L004: Content generation with guardrails` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M16-L005",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M16-L005\n- Lesson Title: Deliverability & reputation signals\n- Module: M16 ‚Äî Marketing Cloud & Account Engagement\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M16-L005: Deliverability & reputation signals` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M16-L006",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M16-L006\n- Lesson Title: Attribution caveats & lift analysis\n- Module: M16 ‚Äî Marketing Cloud & Account Engagement\n- Subtopic / Focus Area: General\n- Complexity Level: A (Advanced)\n- Estimated Duration: 75 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M16-L006: Attribution caveats & lift analysis` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M16-L007",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M16-L007\n- Lesson Title: CRM ‚Üî Marketing Cloud data contracts\n- Module: M16 ‚Äî Marketing Cloud & Account Engagement\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M16-L007: CRM ‚Üî Marketing Cloud data contracts` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M16-L008",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M16-L008\n- Lesson Title: Evidence: campaign packs & outcomes\n- Module: M16 ‚Äî Marketing Cloud & Account Engagement\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M16-L008: Evidence: campaign packs & outcomes` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M17-L001",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M17-L001\n- Lesson Title: Setup audit trail & field history tracking\n- Module: M17 ‚Äî Observability & Audit\n- Subtopic / Focus Area: General\n- Complexity Level: F (Foundation)\n- Estimated Duration: 45 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M17-L001: Setup audit trail & field history tracking` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M17-L002",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M17-L002\n- Lesson Title: Event Monitoring signals & dashboards\n- Module: M17 ‚Äî Observability & Audit\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M17-L002: Event Monitoring signals & dashboards` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M17-L003",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M17-L003\n- Lesson Title: Login/geography anomalies & alerts\n- Module: M17 ‚Äî Observability & Audit\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M17-L003: Login/geography anomalies & alerts` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M17-L004",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M17-L004\n- Lesson Title: Apex/Flow error rate monitors\n- Module: M17 ‚Äî Observability & Audit\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M17-L004: Apex/Flow error rate monitors` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M17-L005",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M17-L005\n- Lesson Title: Data storage & API usage health\n- Module: M17 ‚Äî Observability & Audit\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M17-L005: Data storage & API usage health` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M17-L006",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M17-L006\n- Lesson Title: Compliance dashboards & exports\n- Module: M17 ‚Äî Observability & Audit\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M17-L006: Compliance dashboards & exports` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M17-L007",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M17-L007\n- Lesson Title: RCA narratives & remediation loops\n- Module: M17 ‚Äî Observability & Audit\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M17-L007: RCA narratives & remediation loops` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M17-L008",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M17-L008\n- Lesson Title: Evidence: links to logs/records/policies\n- Module: M17 ‚Äî Observability & Audit\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M17-L008: Evidence: links to logs/records/policies` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M18-L001",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M18-L001\n- Lesson Title: Selectivity, indexes & skinny tables\n- Module: M18 ‚Äî Performance & Limits\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M18-L001: Selectivity, indexes & skinny tables` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M18-L002",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M18-L002\n- Lesson Title: Locking, concurrency & retry patterns\n- Module: M18 ‚Äî Performance & Limits\n- Subtopic / Focus Area: General\n- Complexity Level: A (Advanced)\n- Estimated Duration: 75 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M18-L002: Locking, concurrency & retry patterns` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M18-L003",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M18-L003\n- Lesson Title: Batchable scale & chunking strategies\n- Module: M18 ‚Äî Performance & Limits\n- Subtopic / Focus Area: General\n- Complexity Level: A (Advanced)\n- Estimated Duration: 75 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M18-L003: Batchable scale & chunking strategies` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M18-L004",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M18-L004\n- Lesson Title: Caching & query hints dos/don‚Äôts\n- Module: M18 ‚Äî Performance & Limits\n- Subtopic / Focus Area: General\n- Complexity Level: A (Advanced)\n- Estimated Duration: 75 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M18-L004: Caching & query hints dos/don‚Äôts` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M18-L005",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M18-L005\n- Lesson Title: LWC perf budgets & render profiles\n- Module: M18 ‚Äî Performance & Limits\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M18-L005: LWC perf budgets & render profiles` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M18-L006",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M18-L006\n- Lesson Title: Flow governor awareness & patterns\n- Module: M18 ‚Äî Performance & Limits\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M18-L006: Flow governor awareness & patterns` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M18-L007",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M18-L007\n- Lesson Title: Async coordination & limits dashboards\n- Module: M18 ‚Äî Performance & Limits\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M18-L007: Async coordination & limits dashboards` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M18-L008",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M18-L008\n- Lesson Title: Perf experiment design & success criteria\n- Module: M18 ‚Äî Performance & Limits\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M18-L008: Perf experiment design & success criteria` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M19-L001",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M19-L001\n- Lesson Title: Data classification & minimization in SFDC\n- Module: M19 ‚Äî Privacy, Compliance & Ethics\n- Subtopic / Focus Area: General\n- Complexity Level: F (Foundation)\n- Estimated Duration: 45 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M19-L001: Data classification & minimization in SFDC` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M19-L002",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M19-L002\n- Lesson Title: Field encryption & masking strategies\n- Module: M19 ‚Äî Privacy, Compliance & Ethics\n- Subtopic / Focus Area: General\n- Complexity Level: A (Advanced)\n- Estimated Duration: 75 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M19-L002: Field encryption & masking strategies` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M19-L003",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M19-L003\n- Lesson Title: Consent management & lawful basis\n- Module: M19 ‚Äî Privacy, Compliance & Ethics\n- Subtopic / Focus Area: General\n- Complexity Level: A (Advanced)\n- Estimated Duration: 75 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M19-L003: Consent management & lawful basis` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M19-L004",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M19-L004\n- Lesson Title: Right-to-access/delete workflows\n- Module: M19 ‚Äî Privacy, Compliance & Ethics\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M19-L004: Right-to-access/delete workflows` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M19-L005",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M19-L005\n- Lesson Title: Shadow-IT detection & remediation\n- Module: M19 ‚Äî Privacy, Compliance & Ethics\n- Subtopic / Focus Area: General\n- Complexity Level: A (Advanced)\n- Estimated Duration: 75 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M19-L005: Shadow-IT detection & remediation` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M19-L006",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M19-L006\n- Lesson Title: Incident response & customer comms\n- Module: M19 ‚Äî Privacy, Compliance & Ethics\n- Subtopic / Focus Area: General\n- Complexity Level: A (Advanced)\n- Estimated Duration: 75 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M19-L006: Incident response & customer comms` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M19-L007",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M19-L007\n- Lesson Title: Vendor risk & DDQ evidence packs\n- Module: M19 ‚Äî Privacy, Compliance & Ethics\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M19-L007: Vendor risk & DDQ evidence packs` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M19-L008",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M19-L008\n- Lesson Title: Annual policy ops & reviews\n- Module: M19 ‚Äî Privacy, Compliance & Ethics\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M19-L008: Annual policy ops & reviews` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M20-L001",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M20-L001\n- Lesson Title: Lead/case sync & enrichment recipes\n- Module: M20 ‚Äî Workato & iPaaS Interlocks\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M20-L001: Lead/case sync & enrichment recipes` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M20-L002",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M20-L002\n- Lesson Title: Idempotent upserts & correlation keys\n- Module: M20 ‚Äî Workato & iPaaS Interlocks\n- Subtopic / Focus Area: General\n- Complexity Level: A (Advanced)\n- Estimated Duration: 75 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M20-L002: Idempotent upserts & correlation keys` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M20-L003",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M20-L003\n- Lesson Title: Error handling, DLQ & replay policies\n- Module: M20 ‚Äî Workato & iPaaS Interlocks\n- Subtopic / Focus Area: General\n- Complexity Level: A (Advanced)\n- Estimated Duration: 75 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M20-L003: Error handling, DLQ & replay policies` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M20-L004",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M20-L004\n- Lesson Title: Rate limits, quotas & backpressure\n- Module: M20 ‚Äî Workato & iPaaS Interlocks\n- Subtopic / Focus Area: General\n- Complexity Level: A (Advanced)\n- Estimated Duration: 75 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M20-L004: Rate limits, quotas & backpressure` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M20-L005",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M20-L005\n- Lesson Title: Evidence packs: job links, payloads, hashes\n- Module: M20 ‚Äî Workato & iPaaS Interlocks\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M20-L005: Evidence packs: job links, payloads, hashes` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M20-L006",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M20-L006\n- Lesson Title: Cost/latency budgets per flow\n- Module: M20 ‚Äî Workato & iPaaS Interlocks\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M20-L006: Cost/latency budgets per flow` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M20-L007",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M20-L007\n- Lesson Title: Governance & packages/promotion\n- Module: M20 ‚Äî Workato & iPaaS Interlocks\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M20-L007: Governance & packages/promotion` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M20-L008",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M20-L008\n- Lesson Title: Sunsetting & archival policies\n- Module: M20 ‚Äî Workato & iPaaS Interlocks\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M20-L008: Sunsetting & archival policies` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M21-L001",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M21-L001\n- Lesson Title: Safe prompt patterns for Apex/Flow/LWC copilots\n- Module: M21 ‚Äî AI in Salesforce\n- Subtopic / Focus Area: General\n- Complexity Level: F (Foundation)\n- Estimated Duration: 45 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M21-L001: Safe prompt patterns for Apex/Flow/LWC copilots` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M21-L002",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M21-L002\n- Lesson Title: Grounding from org metadata, KB & case notes\n- Module: M21 ‚Äî AI in Salesforce\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M21-L002: Grounding from org metadata, KB & case notes` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M21-L003",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M21-L003\n- Lesson Title: Evaluators for narrative/code/config quality\n- Module: M21 ‚Äî AI in Salesforce\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M21-L003: Evaluators for narrative/code/config quality` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M21-L004",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M21-L004\n- Lesson Title: Non-determinism harness (thresholds, reviewers)\n- Module: M21 ‚Äî AI in Salesforce\n- Subtopic / Focus Area: General\n- Complexity Level: A (Advanced)\n- Estimated Duration: 75 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M21-L004: Non-determinism harness (thresholds, reviewers)` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M21-L005",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M21-L005\n- Lesson Title: Cost/latency budgets & circuit breakers\n- Module: M21 ‚Äî AI in Salesforce\n- Subtopic / Focus Area: General\n- Complexity Level: A (Advanced)\n- Estimated Duration: 75 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M21-L005: Cost/latency budgets & circuit breakers` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M21-L006",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M21-L006\n- Lesson Title: Named Credentials & callout patterns to LLM APIs\n- Module: M21 ‚Äî AI in Salesforce\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M21-L006: Named Credentials & callout patterns to LLM APIs` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M21-L007",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M21-L007\n- Lesson Title: Access/consent scoping for AI features\n- Module: M21 ‚Äî AI in Salesforce\n- Subtopic / Focus Area: General\n- Complexity Level: A (Advanced)\n- Estimated Duration: 75 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M21-L007: Access/consent scoping for AI features` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M21-L008",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M21-L008\n- Lesson Title: Drift monitoring & version pinning\n- Module: M21 ‚Äî AI in Salesforce\n- Subtopic / Focus Area: General\n- Complexity Level: A (Advanced)\n- Estimated Duration: 75 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M21-L008: Drift monitoring & version pinning` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M22-L001",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M22-L001\n- Lesson Title: Canonicals: ADRs, design notes, SOPs, KB\n- Module: M22 ‚Äî Knowledge & RAG for Salesforce\n- Subtopic / Focus Area: General\n- Complexity Level: F (Foundation)\n- Estimated Duration: 45 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M22-L001: Canonicals: ADRs, design notes, SOPs, KB` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M22-L002",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M22-L002\n- Lesson Title: Chunking & metadata (object, field, version, owner)\n- Module: M22 ‚Äî Knowledge & RAG for Salesforce\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M22-L002: Chunking & metadata (object, field, version, owner)` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M22-L003",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M22-L003\n- Lesson Title: Security-tagged retrieval & masking\n- Module: M22 ‚Äî Knowledge & RAG for Salesforce\n- Subtopic / Focus Area: General\n- Complexity Level: A (Advanced)\n- Estimated Duration: 75 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M22-L003: Security-tagged retrieval & masking` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M22-L004",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M22-L004\n- Lesson Title: Citation-first answers & provenance storage\n- Module: M22 ‚Äî Knowledge & RAG for Salesforce\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M22-L004: Citation-first answers & provenance storage` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M22-L005",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M22-L005\n- Lesson Title: FAQ/evaluator sets & regression harness\n- Module: M22 ‚Äî Knowledge & RAG for Salesforce\n- Subtopic / Focus Area: General\n- Complexity Level: A (Advanced)\n- Estimated Duration: 75 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M22-L005: FAQ/evaluator sets & regression harness` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M22-L006",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M22-L006\n- Lesson Title: Freshness & invalidation policies\n- Module: M22 ‚Äî Knowledge & RAG for Salesforce\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M22-L006: Freshness & invalidation policies` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M22-L007",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M22-L007\n- Lesson Title: Support agent copilot routines\n- Module: M22 ‚Äî Knowledge & RAG for Salesforce\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M22-L007: Support agent copilot routines` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M22-L008",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M22-L008\n- Lesson Title: Knowledge health dashboards\n- Module: M22 ‚Äî Knowledge & RAG for Salesforce\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M22-L008: Knowledge health dashboards` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M23-L001",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M23-L001\n- Lesson Title: License types, feature entitlements & costs\n- Module: M23 ‚Äî FinOps & Licensing Economics\n- Subtopic / Focus Area: General\n- Complexity Level: F (Foundation)\n- Estimated Duration: 45 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M23-L001: License types, feature entitlements & costs` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M23-L002",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M23-L002\n- Lesson Title: Storage/API limits monitoring & alerts\n- Module: M23 ‚Äî FinOps & Licensing Economics\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M23-L002: Storage/API limits monitoring & alerts` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M23-L003",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M23-L003\n- Lesson Title: Idle/unused features & cleanup plays\n- Module: M23 ‚Äî FinOps & Licensing Economics\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M23-L003: Idle/unused features & cleanup plays` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M23-L004",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M23-L004\n- Lesson Title: Integration call budgets & batching\n- Module: M23 ‚Äî FinOps & Licensing Economics\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M23-L004: Integration call budgets & batching` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M23-L005",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M23-L005\n- Lesson Title: Vendor negotiations & renewal readiness\n- Module: M23 ‚Äî FinOps & Licensing Economics\n- Subtopic / Focus Area: General\n- Complexity Level: A (Advanced)\n- Estimated Duration: 75 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M23-L005: Vendor negotiations & renewal readiness` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M23-L006",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M23-L006\n- Lesson Title: Quarterly value reports & recommendations\n- Module: M23 ‚Äî FinOps & Licensing Economics\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M23-L006: Quarterly value reports & recommendations` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M23-L007",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M23-L007\n- Lesson Title: Portfolio balancing: run/grow/transform\n- Module: M23 ‚Äî FinOps & Licensing Economics\n- Subtopic / Focus Area: General\n- Complexity Level: A (Advanced)\n- Estimated Duration: 75 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M23-L007: Portfolio balancing: run/grow/transform` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M23-L008",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M23-L008\n- Lesson Title: Sunset/archive decisions & outcomes\n- Module: M23 ‚Äî FinOps & Licensing Economics\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M23-L008: Sunset/archive decisions & outcomes` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M24-L001",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M24-L001\n- Lesson Title: Charter & success metrics for a cross-cloud initiative\n- Module: M24 ‚Äî Capstone\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M24-L001: Charter & success metrics for a cross-cloud initiative` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M24-L002",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M24-L002\n- Lesson Title: Security/sharing & data model blueprint with evidence\n- Module: M24 ‚Äî Capstone\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M24-L002: Security/sharing & data model blueprint with evidence` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M24-L003",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M24-L003\n- Lesson Title: Flow/Apex/LWC build with tests & guardrails\n- Module: M24 ‚Äî Capstone\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M24-L003: Flow/Apex/LWC build with tests & guardrails` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M24-L004",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M24-L004\n- Lesson Title: Integration plan (APIs/CDC/iPaaS) with DLQ/replay\n- Module: M24 ‚Äî Capstone\n- Subtopic / Focus Area: General\n- Complexity Level: A (Advanced)\n- Estimated Duration: 75 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M24-L004: Integration plan (APIs/CDC/iPaaS) with DLQ/replay` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M24-L005",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M24-L005\n- Lesson Title: Analytics pack & executive narratives with citations\n- Module: M24 ‚Äî Capstone\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M24-L005: Analytics pack & executive narratives with citations` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M24-L006",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M24-L006\n- Lesson Title: Observability, limits & incident runbooks\n- Module: M24 ‚Äî Capstone\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M24-L006: Observability, limits & incident runbooks` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M24-L007",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M24-L007\n- Lesson Title: Privacy/compliance overlays & approvals\n- Module: M24 ‚Äî Capstone\n- Subtopic / Focus Area: General\n- Complexity Level: A (Advanced)\n- Estimated Duration: 75 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M24-L007: Privacy/compliance overlays & approvals` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    },
    {
      "custom_id": "lesson_M24-L008",
      "params": {
        "model": "claude-haiku-4-5-20251001",
        "max_tokens": 16384,
        "messages": [
          {
            "role": "user",
            "content": "You are generating a polished, publication-ready lesson for a Technical Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n### CONTENT STRUCTURE REFERENCE (Curriculum Map - first 8000 chars for context):\nComplexity Legend\n\n[F] Foundational ‚Äî Basic concepts, prerequisites\n[I] Intermediate ‚Äî Practical application, integration of concepts\n[A] Advanced ‚Äî Complex problem-solving, experience-dependent\n[E] Expert ‚Äî Specialized knowledge, architectural decisions\n\n\n# M0: AI-Native Salesforce Foundations ‚Äî Lesson Map - Core Concepts & Roles\n\n## L001: What AI Changes in Salesforce (from admin/dev tasks ‚Üí intelligence-led, evidence-first delivery) [F]\n## L002: Roles in the AI Stack: Admin, Consultant, Developer, Architect, BA, QA, Sec, Data, PM [F]\n## L003: Prompt Patterns for SFDC (context, metadata, constraints, proofs, risks, next steps) [F]\n## L004: RAG for SFDC: pulling org metadata/policies/ADRs/KB/case notes with citations [I]\n## L005: Copilot Workbench: user stories, config plans, SOQL drafts, flow scaffolds, Apex reviews [I]\n## L006: Evaluators & Rubrics: quality bars for flows, Apex, LWCs, data maps, and deployments [I]\n## L007: Guardrails: PII/PCI/PHI minimization, consent, retention, redaction-by-default [A]\n## L008: Outcome Metrics: cycle-time‚Üì, defects‚Üì, MTTR‚Üì, API/limits health‚Üë, stakeholder trust‚Üë [I]\n\n\n# M1: Org Strategy & Governance ‚Äî Lesson Map - ALM, Environments & Standards\n\n## L001: Org strategy (single vs multi-org, sandboxes, scratch orgs) [F]\n## L002: ALM with SFDX: branches, stories, promotion paths [I]\n## L003: Naming, tagging & metadata conventions (discoverability, drift control) [I]\n## L004: DoA/approvals for risky changes & exception registers [I]\n## L005: Center of Excellence rhythms & standards catalogs [I]\n## L006: Compliance overlays (SOX, ISO, privacy) to ALM [A]\n## L007: Sunsetting & archival rules for metadata/flows [I]\n## L008: Executive dashboards: change health & velocity [I]\n\n\n# M2: Security & Sharing ‚Äî Lesson Map - Profiles, Perm Sets & Data Scoping\n\n## L001: Principle-of-least-privilege: profiles vs permission sets [F]\n## L002: Sharing model: OWD, roles, sharing rules, manual/team [I]\n## L003: Row-level & field-level security patterns [I]\n## L004: Scoped data access for copilots & retrieval [A]\n## L005: Shield: encryption, event monitoring, field audit trail [A]\n## L006: Just-in-time access, break-glass & recerts [A]\n## L007: Secrets & Named Credentials hygiene [I]\n## L008: Audit packs: who/what/when with hashes [I]\n\n\n# M3: Data Model & Contracts ‚Äî Lesson Map - Objects, Relationships & Quality\n\n## L001: Standard vs custom objects; lookup vs master-detail [F]\n## L002: External Objects/Big Objects & LDV considerations [I]\n## L003: Field contracts: types, validation, picklists, uniqueness [I]\n## L004: Referential integrity & cascade behaviors [I]\n## L005: Data quality rules & remediation (GE/Soda-like patterns) [A]\n## L006: Archival/retention & soft delete vs hard delete [I]\n## L007: Metric contracts across Sales/Service/Custom apps [I]\n## L008: Evidence: ERDs, lineage & owner registry [I]\n\n\n# M4: Declarative Automation ‚Äî Lesson Map - Flow-First Architecture\n\n## L001: Flow types (record-triggered, schedule, screen, autolaunched) [F]\n## L002: Best practices: subflows, fault paths, transactions [I]\n## L003: Idempotency, retries & bulk-safe Flow design [A]\n## L004: Flow vs Apex decision tree & governance [I]\n## L005: Flow tests, debug & runtime performance [I]\n## L006: AI-assisted Flow generation with guardrails [I]\n## L007: Change collision & recursion prevention [A]\n## L008: Evidence: diagrams, run logs, approvals [I]\n\n\n# M5: Apex Engineering ‚Äî Lesson Map - Patterns, Limits & Async\n\n## L001: Governor limits & bulkification fundamentals [F]\n## L002: SOQL/SOSL patterns, selective filters, indexing [I]\n## L003: Triggers: single-trigger pattern & handler layers [I]\n## L004: Async: Queueable/Batchable/Schedulable/Future [I]\n## L005: Platform events & transactional boundaries [A]\n## L006: Error handling, retries & DLQ patterns in Apex [A]\n## L007: AI code review rubrics & test recommendations [I]\n## L008: Evidence: coverage, logs, debug, limits dashboards [I]\n\n\n# M6: Lightning Web Components ‚Äî Lesson Map - UX, Data & Security\n\n## L001: LWC anatomy, composition & data services (wire, Apex) [F]\n## L002: State, events & pub/sub patterns [I]\n## L003: Accessibility & design standards (SLDS) [I]\n## L004: Caching, offline & optimistic UI patterns [I]\n## L005: Security: Locker, CSP, dom sanitization [A]\n## L006: Performance budgets & profiling [I]\n## L007: AI-assisted code scaffolds & reviews [I]\n## L008: Evidence: storybook-style docs & tests [I]\n\n\n# M7: Integration & APIs ‚Äî Lesson Map - REST/SOAP, Named Creds & External Objects\n\n## L001: REST/SOAP basics, auth, rate limits & retries [F]\n## L002: Named Credentials & OAuth/OIDC flows [I]\n## L003: External Services, OpenAPI & invocable actions [I]\n## L004: Bulk API v2 & idempotent upserts/merges [A]\n## L005: External Objects (OData) vs replication trade-offs [A]\n## L006: Platform Events & Change Data Capture bridges [I]\n## L007: Workato/MuleSoft/ETL hooks & backpressure [I]\n## L008: Evidence: postman packs, contracts & examples [I]\n\n\n# M8: Eventing & CDC ‚Äî Lesson Map - Streaming, Ordering & Consistency\n\n## L001: CDC vs PE vs Generic Events: when to use which [F]\n## L002: Replay IDs, ordering & dedupe strategies [A]\n## L003: Outbox/inbox patterns for reliability [A]\n## L004: Backpressure, flow control & burst handling [A]\n## L005: Consumer isolation & DLQ triage [A]\n## L006: Contract tests for topics & change schemas [A]\n## L007: Observability: lag, drops, replays dashboards [I]\n## L008: Evidence: topic catalogs & consumer SLAs [I]\n\n\n# M9: DevOps & Packaging ‚Äî Lesson Map - SFDX, 2GP & CI/CD\n\n## L001: SFDX project structure & source tracking [F]\n## L002: Scratch orgs & ephemeral environments [I]\n## L003: Second-gen packaging (unlocked/managed) [A]\n## L004: Metadata vs source: deploy & retrieve rules [I]\n## L005: CI/CD pipelines with test gates & code scan [I]\n## L006: Data seeding, org shape & fixtures [I]\n## L007: Release notes, change approvals & audit [I]\n## L008: Rollback/rollback-less patterns & canaries [A]\n\n\n# M10: Data Migration & LDV ‚Äî Lesson Map - Loader, Bulk & Idempotency\n\n## L001: Data Loader vs APIs vs ETL tools [F]\n## L002: Upsert keys, external IDs & mapping [I]\n## L003: Batch sizing, concurrency & locks [A]\n## L004: Referential integrity & parent-first loads [I]\n## L005: Masking & synthetic data for tests [A]\n## L006: Reconciliation & tie-out to sources [I]\n## L007: Late-arriving & delta repair flows [A]\n## L008: Evidence: counts, checksums, exceptions [I]\n\n\n# M11: Reporting & Analytics ‚Äî Lesson Map - Reports, Dashboards & Narratives\n\n## L001: Report types & join capabilities [F]\n## L002: Dashboard design & KPI contracts [I]\n## L003: Row-level formulas, buckets & limits [I]\n## L004: CRM Analytics/Einstein Analytics patterns [A]\n## L005: Narrative generation with citations [I]\n## L006: Performance & refresh strategies [I]\n## L007: Data trust: reconciliation & certification [I]\n## L008: Executive packs (What/So-What/Now-What) [I]\n\n\n# M12: Service Cloud Intelligence ‚Äî Lesson Map - Case, Omni & Knowledge\n\n## L001: Case lifecycle & Omni-Channel routing [F]\n## L002: Macros, quick actions & SLA timers [I]\n## L003: Knowledge management & article quality rubrics [I]\n## L004: Live summarization & reply drafting with citations [I]\n## L005: Entitlements & milestone monitoring [I]\n## L006: Deflection bots & safe prompt/guardrails [A]\n## L007: Voice/chat integration & transcripts [I]\n## L008: Evidence: CSAT/NPS & case quality dashboards [I]\n\n\n# M13: Sales Cloud Orchestration ‚Äî Lesson Map - Leads‚ÜíOps & Playbooks\n\n## L001: Lead assignment & MQL/SQL definitions [F]\n## L002: Opportunity stages & exit criteria [I]\n## L003: Playbooks & next-best-actions with proof [I]\n## L004: Forecast categories & pipeline hygiene [I]\n## L005: Account scoring & whitespace detection [A]\n## L006: Executive deal reviews & narratives [I]\n## L007: RevOps interlocks (pricing/finance) [I]\n## L008: Evidence: win/loss insights & actions [I]\n\n\n# M14: CPQ & Billing ‚Äî Lesson Map - Modeling, Rules & Documents\n\n## L001:\n\n[Content structure truncated for token limits. Focus on generating the lesson based on the template structure.]\n\n---\n\nYou are generating a polished, publication-ready lesson for an AI-Native SaaS Curriculum.\nRead and internalize these two inputs before writing anything:\n\n1. LESSON_GENERATION_PROMPT_GENERIC.md ‚Äî this defines the canonical 10-section structure.\n2. content_structure_ai-native-saas-curriculum-lesson-maps.md ‚Äî this defines where the lesson fits in the broader curriculum.\n\n---\n\n### LESSON METADATA\n- Lesson Code: M24-L008\n- Lesson Title: Release plan & post-launch operations with KPIs\n- Module: M24 ‚Äî Capstone\n- Subtopic / Focus Area: General\n- Complexity Level: I (Intermediate)\n- Estimated Duration: 60 minutes\n- Target Audience: Technical professionals and developers\n- Organization Context: Organizations implementing solutions\n\n**Prerequisites & Context**\n- Prior Knowledge Required: Basic understanding of the domain\n- Related Lessons: Related lessons in the same module\n- Domain Context: Technology and digital transformation\n\n---\n\n### INSTRUCTIONS\n\nYou must generate a **complete, polished lesson** following the exact 10-section structure of the template.\nEach section must be written in clean, engaging, professional prose using proper Markdown syntax.\n\n**Length & Depth Guidelines**\n- [F] Foundation: ~350‚Äì400 lines, 2‚Äì3 core concepts, 3 scenarios  \n- [I] Intermediate: ~400‚Äì500 lines, 3‚Äì4 core concepts, 4 scenarios  \n- [A] Advanced: 500+ lines, 4+ concepts, multiple scenarios  \n\n**Content & Technical Requirements**\n1. Include working code examples (‚â•15 lines each) demonstrating realistic SaaS architecture patterns.  \n   Languages accepted: TypeScript/Node.js, SQL, Terraform, or YAML.  \n2. Use real metrics and trade-offs (e.g., ‚Äúreduces provisioning time by 60%‚Äù, ‚Äúsaves $50K annually‚Äù).  \n3. Anchor explanations in SaaS-specific terminology: multi-tenancy, tenant isolation, subscription models, usage-based pricing, CI/CD, and observability.  \n4. Connect code and architecture examples to common SaaS stacks ‚Äî Next.js, Postgres, Vercel, AWS, and Terraform.  \n5. Discuss business impact, not just technology. Every technical concept must map to a measurable outcome (cost, velocity, reliability, compliance).  \n6. Avoid filler phrases (‚Äúlearn about‚Äù, ‚Äúunderstand‚Äù); use precise, action-oriented verbs.  \n7. Each code example must include a short contextual explanation and expected outcome.  \n8. Every section should open with 1‚Äì2 framing sentences that orient the learner before details or lists.  \n9. Use active voice, short sentences (under 25 words), and clear transitions.  \n10. Maintain tone balance: professional, instructive, and confident ‚Äî not academic or conversational.  \n\n---\n\n### FORMATTING & STYLE GUIDELINES\n\n- **Headings:** Use `##` for major sections, `###` for subsections. Capitalize key words.  \n- **Bullets:** Use `-` for list items. Avoid numbered lists unless order matters.  \n- **Code Blocks:** Use fenced code blocks with language tags (` ```ts`, ` ```sql`, etc.) and concise comments.  \n- **Tables:** Use clean Markdown tables with short headers; follow with 1‚Äì2 lines of interpretation guidance.  \n- **Callouts:** Use icons like ‚úÖ, ‚ö†Ô∏è, üí° for emphasis when appropriate.  \n- **Spacing:** Insert blank lines before and after headings, code blocks, and tables for readability.  \n- **Tone & Flow:** Alternate between explanation and application. Every theoretical statement should lead into an example or outcome.  \n- **Lexical Clarity:** When using technical terms (e.g., ‚Äútenancy isolation‚Äù), add a short clarifier in parentheses on first use.  \n\n---\n\n### QUALITY GUARANTEES\n\nYour final output must:\n- Contain all 10 sections from the template in order.  \n- Have consistent structure, formatting, and flow.  \n- Read naturally, as if authored by an experienced SaaS educator.  \n- Contain no meta-text, instructions, or placeholders.  \n- Begin immediately with `# Lesson M24-L008: Release plan & post-launch operations with KPIs` or the first section heading.  \n\nDo **not** include:\n- Any ‚ÄúLLM Prompt‚Äù or template boilerplate.  \n- Any context or metadata explanation.  \n- Any quality assurance notes at the end.\n\n---\n\n### FINAL OUTPUT\n\nDeliver the **final, learner-facing Markdown lesson**, cleanly formatted and publication-ready."
          }
        ]
      }
    }
  ]
}